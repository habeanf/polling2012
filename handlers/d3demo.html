<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="/static/d3.js"></script>
    <style type="text/css">

        svg {
          font-family: "Helvetica Neue", Helvetica;
        }

        .line {
          fill: none;
          stroke: #000;
          stroke-width: 2px;
        }

    </style>
  </head>
    <body>
    	<script type="text/javascript">
    	var data = {{data}};
      var preferences = {};
      var SWING_MARGIN_PCT = 6;

      // bahhh how does Math not have sign builtin?
      Math.sign = function(x) {
        if (x < 0) return -1;
        if (x > 0) return 1;
        return 0;
      }
      // parse date objects for later use; new Date(x) expects can parse x if x is isoformat (YYYY-MM-DD...)
      // while you're there, sort the polls by to date ascending
      data.forEach(function (state) {
        state.polls.forEach(function (poll) {
          poll.fromDate = new Date(poll.fromDate);
          poll.toDate = new Date(poll.toDate);
        });
        state.polls.sort(function (a,b) {
          return Math.sign(a.toDate-b.toDate);
        })
      });

      function calculateStateType(state) {

      }

      function generateDaily(stateData) {

      }

      function generateStateData() {
        return data.map(function (state) {return generateDaily(state);});
      }

      function generateBucketData() {

      }

    	var xAxis = [];
    	var today = new Date();
    	for (var x=1; x<61; x++){
    		var daDate = new Date( today - 86400000 * x );
    		xAxis.push( [daDate.getFullYear(),daDate.getMonth()+1,daDate.getDate()].join('/') );
    	}
    	yAxis = {
    		DemocratsAssured : "Democrats Assured",
    		DemocratsHanging : "Democrats Hanging",
    		DemocratesDispute : "Democrats Disputed",
    		Disputed : "Disputed",
    		RepublicanDispute : "Republicans Disputed",
    		RepublicansHanging: "Republicans Hanging",
    		RepublicansAssured : "Republicans Assured"
    	}

    	var totalWeights = 538;
    	




    	</script>
    </body>
</html>


